<div class="search-wrapper">
  <%= search_form_for q, url: search_articles_path, method: :get do |f| %>
    <!--品種名-->
    <div class="field">
      <%= f.label :cultivar_name_cont, "品種名" %>
      <%= f.search_field :cultivar_name_cont, autofocus: true, autocomplete: "cultivar_name", class: "item" %>
    </div>

    <!--都道府県-->
    <div class="field">
      <%= f.label :prefecture_id_eq, "都道府県" %>
      <%= f.collection_select :prefecture_id_eq, prefectures, :id, :name, include_blank: "指定なし" %>
    </div>

    <!--市区町村-->
    <div class="field">
      <%= f.label :municipality_id_eq, "市区町村" %>
      <%= f.collection_select :municipality_id_eq, municipalities, :id, :municipality_name, include_blank: "指定なし" %>
    </div>

    <!--難易度-->
    <div class="field">
      <%= f.label :level_eq, "難易度" %>
      <%= f.select :level_eq, [["とても難しい",1],["難しい",2],["普通",3],["簡単",4],["とても簡単",5]], include_blank: "指定なし" %>
    </div>

    <!--カテゴリ-->
    <div class="field">
      <%= f.label :category_eq, "カテゴリ" %>
      <%= f.radio_button :category_eq, "", checked: true %>
      <%= f.label :category_eq, "指定なし", value: "" %>
      <%= f.radio_button :category_eq, :vegetable %>
      <%= f.label :category_eq, "野菜", value: :vegetable %>
      <%= f.radio_button :category_eq, :fruit %>
      <%= f.label :category_eq, "果物", value: :fruit %>
      <%= f.radio_button :category_eq, :plant %>
      <%= f.label :category_eq, "草木", value: :plant %>
      <%= f.radio_button :category_eq, :flower %>
      <%= f.label :category_eq, "花", value: :flower %>
    </div>

    <!--時期-->
    <div class="field">
      <%= f.label :season_eq, "時期" %>
      <%= f.radio_button :season_eq, "", checked: true %>
      <%= f.label :season_eq, "指定なし", value: "" %>
      <%= f.radio_button :season_eq, :spring %>
      <%= f.label :season_eq, "春", value: :spring %>
      <%= f.radio_button :season_eq, :summer %>
      <%= f.label :season_eq, "夏", value: :summer %>
      <%= f.radio_button :season_eq, :autumn %>
      <%= f.label :season_eq, "秋", value: :autumn %>
      <%= f.radio_button :season_eq, :winter %>
      <%= f.label :season_eq, "冬", value: :winter %>
    </div>

    <!--肥料-->
    <div class="field">
      <%= f.label :fertilizer_existence_eq, "肥料" %>
      <%= f.radio_button :fertilizer_existence_eq, "", checked: true %>
      <%= f.label :fertilizer_existence_eq, "指定なし", value: "" %>
      <%= f.radio_button :fertilizer_existence_eq, :spring %>
      <%= f.label :fertilizer_existence_eq, "あり", value: true %>
      <%= f.radio_button :fertilizer_existence_eq, :summer %>
      <%= f.label :fertilizer_existence_eq, "なし", value: false %>
    </div>

    <!--場所-->
    <div class="field">
      <%= f.label :place_eq, "場所" %>
      <%= f.radio_button :place_eq, "", checked: true %>
      <%= f.label :place_eq, "指定なし", value: "" %>
      <%= f.radio_button :place_eq, :indoor %>
      <%= f.label :place_eq, "屋内", value: :indoor %>
      <%= f.radio_button :place_eq, :outdoor %>
      <%= f.label :place_eq, "屋外", value: :outdoor %>
      <%= f.radio_button :place_eq, :veranda %>
      <%= f.label :place_eq, "ベランダ", value: :veranda %>
    </div>

    <!--条件-->
    <div class="field">
      <%= f.label :condition_eq, "条件" %>
      <%= f.radio_button :condition_eq, "", checked: true %>
      <%= f.label :condition_eq, "指定なし", value: "" %>
      <%= f.radio_button :condition_eq, :pot %>
      <%= f.label :condition_eq, "鉢", value: :pot %>
      <%= f.radio_button :condition_eq, :ground %>
      <%= f.label :condition_eq, "地植え", value: :ground %>
      <%= f.radio_button :condition_eq, :greenhouse %>
      <%= f.label :condition_eq, "ハウス", value: :greenhouse %>
    </div>

    <!--開始時-->
    <div class="field">
      <%= f.label :state_at_start_eq, "開始時" %>
      <%= f.radio_button :state_at_start_eq, "", checked: true %>
      <%= f.label :state_at_start_eq, "指定なし", value: "" %>
      <%= f.radio_button :state_at_start_eq, :seed %>
      <%= f.label :state_at_start_eq, "種から", value: :seed %>
      <%= f.radio_button :state_at_start_eq, :seedling %>
      <%= f.label :state_at_start_eq, "苗から", value: :seedling %>
      <%= f.radio_button :state_at_start_eq, :bulb %>
      <%= f.label :state_at_start_eq, "球根から", value: :bulb %>
    </div>

    <div class="actions">
      <%= f.submit "検索" %>
    </div>

  <% end %>
</div>

<script>
  $(document).on('change', '#q_prefecture_id_eq', function() {
    return $.ajax({
      type: 'GET',
      url: '/articles/get_municipalities_search',
      dataType: 'script',
      data: {
        prefecture_id: $(this).val()
      }
    }).done();
  });

  $(function(){
    if(!!<%= @prefecture_id || "0" %>){
    $.ajax({
      type: 'GET',
      url: '/articles/get_municipalities_search',
      dataType: 'script',
      data: {
        prefecture_id: <%= @prefecture_id || "0" %>
      }
    }).done();
    }
  });
</script>